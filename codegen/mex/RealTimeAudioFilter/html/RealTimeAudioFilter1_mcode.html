<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> RealTimeAudioFilter</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="mxinfo " id="T1:U1"><span class="var type1" id="S2T1U7">deviceReader</span> = <span class="mxinfo " id="T1:U3">audioDeviceReader</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T5:U4"><span class="var type1" id="S4T5U12">deviceWriter</span> = <span class="mxinfo " id="T5:U6">audioDeviceWriter(<span class="string">'SampleRate'</span>,<span class="var type1" id="S2T1U17">deviceReader</span>.SampleRate)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T11:U8"><span class="var type1" id="S6T11U21">cleanWriter</span> = dsp.AudioFileWriter(<span class="string">'cleanOutput13.wav'</span>,<span class="string">'FileFormat'</span>,<span class="string">'WAV'</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T17:U10"><span class="var type1" id="S8T17U31">filteredWriter</span> = dsp.AudioFileWriter(<span class="string">'filteredOutput13.wav'</span>,<span class="string">'FileFormat'</span>,<span class="string">'WAV'</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T10:U12"><span class="var type1" id="S9T10U41">nyq</span> = <span class="mxinfo " id="T10:U14">44100/2.0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T20:U15"><span class="var type1" id="S10T20U47">filtType</span> = <span class="mxinfo " id="T20:U17"><span class="string">'stop'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">[<span class="var type1" id="S11T21U52">a2881</span>,<span class="var type1" id="S12T21U53">b2881</span>] = ellip(5,1,60,[2830.0 2925.0]/<span class="var type1" id="S9T10U64">nyq</span>,<span class="var type1" id="S10T20U65">filtType</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line">[<span class="var type1" id="S14T21U69">a960</span>,<span class="var type1" id="S15T21U70">b960</span>] = ellip(5,1,60,[930.0 1085.0]/<span class="var type1" id="S9T10U81">nyq</span>,<span class="var type1" id="S10T20U82">filtType</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line">[<span class="var type1" id="S16T21U86">a1920</span>,<span class="var type1" id="S17T21U87">b1920</span>] = ellip(5,1,60,[1900.0 2040.0]/<span class="var type1" id="S9T10U98">nyq</span>,<span class="var type1" id="S10T20U99">filtType</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line">[<span class="var type1" id="S18T21U103">a5760</span>,<span class="var type1" id="S19T21U104">b5760</span>] = ellip(5,1,60,[5500.0 8000.0]/<span class="var type1" id="S9T10U115">nyq</span>,<span class="var type1" id="S10T20U116">filtType</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">[<span class="var type1" id="S20T21U120">a3840</span>,<span class="var type1" id="S21T21U121">b3840</span>] = ellip(5,1,60,[3750.0 3950.0]/<span class="var type1" id="S9T10U132">nyq</span>,<span class="var type1" id="S10T20U133">filtType</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line">[<span class="var type1" id="S22T21U137">a4802</span>,<span class="var type1" id="S23T21U138">b4802</span>] = ellip(5,1,60,[4780.0 4820.0]/<span class="var type1" id="S9T10U149">nyq</span>,<span class="var type1" id="S10T20U150">filtType</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">[<span class="var type1" id="S24T21U154">a8643</span>,<span class="var type1" id="S25T21U155">b8643</span>] = ellip(5,1,60,[7500.0 9500.0]/<span class="var type1" id="S9T10U166">nyq</span>,<span class="var type1" id="S10T20U167">filtType</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">[<span class="var type1" id="S26T21U171">a2827</span>,<span class="var type1" id="S27T21U172">b2827</span>] = ellip(5,1,60,[2500.0 3500.0]/<span class="var type1" id="S9T10U183">nyq</span>,<span class="var type1" id="S10T20U184">filtType</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line"><span class="comment">%[a13000,b13000] = ellip(5,1,60,[12500.0 16000.0]/nyq,filtType);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"><span class="autoExtrinsicFcn" id="F678N4:B187">disp</span>(<span class="string">'Begin Signal Input<span class="keyword">...</span>'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T10:U50"><span class="var type1" id="S29T10U191">i</span> = <span class="mxinfo " id="T10:U52">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T22:U53"><span class="var type1" id="S30T22U195">zi2881</span> = <span class="mxinfo " id="T22:U55">zeros(<span class="mxinfo " id="T10:U56">10</span>,1,<span class="string">'double'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line">    <span class="mxinfo " id="T22:U57"><span class="var type1" id="S32T22U203">zi960</span> = <span class="mxinfo " id="T22:U59">zeros(<span class="mxinfo " id="T10:U60">10</span>,1,<span class="string">'double'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line">    <span class="mxinfo " id="T22:U61"><span class="var type1" id="S33T22U211">zi1920</span> = <span class="mxinfo " id="T22:U63">zeros(<span class="mxinfo " id="T10:U64">10</span>,1,<span class="string">'double'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line">    <span class="mxinfo " id="T22:U65"><span class="var type1" id="S34T22U219">zi5760</span> = <span class="mxinfo " id="T22:U67">zeros(<span class="mxinfo " id="T10:U68">10</span>,1,<span class="string">'double'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line">    <span class="mxinfo " id="T22:U69"><span class="var type1" id="S35T22U227">zi3840</span> = <span class="mxinfo " id="T22:U71">zeros(<span class="mxinfo " id="T10:U72">10</span>,1,<span class="string">'double'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line">    <span class="mxinfo " id="T22:U73"><span class="var type1" id="S36T22U235">zi4802</span> = <span class="mxinfo " id="T22:U75">zeros(<span class="mxinfo " id="T10:U76">10</span>,1,<span class="string">'double'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line">    <span class="mxinfo " id="T22:U77"><span class="var type1" id="S37T22U243">zi8643</span> = <span class="mxinfo " id="T22:U79">zeros(<span class="mxinfo " id="T10:U80">10</span>,1,<span class="string">'double'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line">    <span class="mxinfo " id="T22:U81"><span class="var type1" id="S38T22U251">zi6722</span> = <span class="mxinfo " id="T22:U83">zeros(<span class="mxinfo " id="T10:U84">10</span>,1,<span class="string">'double'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line">    <span class="mxinfo " id="T22:U85"><span class="var type1" id="S39T22U259">zi2827</span> = <span class="mxinfo " id="T22:U87">zeros(<span class="mxinfo " id="T10:U88">10</span>,1,<span class="string">'double'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line">    <span class="comment">%zi13000 = zeros(10,1,'double');</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line"><span class="keyword">while</span> <span class="mxinfo " id="T3:U89"><span class="var type1" id="S29T10U267">i</span> &lt; <span class="mxinfo " id="T10:U91">1000</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line">    <span class="mxinfo " id="T23:U92"><span class="var type1" id="S40T23U271">mySignal</span> = <span class="mxinfo " id="T23:U94"><span class="var type1" id="S2T1U274">deviceReader</span>.step()</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35">35</a></span><span class="line">    <span class="var type1" id="S6T11U279">cleanWriter</span>.step(<span class="mxinfo " id="T23:U97"><span class="fcn" id="F180N3:B282">amplify</span>(<span class="var type1" id="S40T23U283">mySignal</span>,<span class="mxinfo " id="T10:U99">4</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36">36</a></span><span class="line">    [<span class="var type1" id="S42T23U288">y2881</span>,<span class="var type1" id="S43T22U289">zf2881</span>]  = filter(<span class="var type1" id="S11T21U292">a2881</span>,<span class="var type1" id="S12T21U293">b2881</span>,<span class="var type1" id="S40T23U294">mySignal</span>,<span class="var type1" id="S30T22U295">zi2881</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37">37</a></span><span class="line">    [<span class="var type1" id="S45T23U299">y960</span>, <span class="var type1" id="S46T22U300">zf960</span>] = filter(<span class="var type1" id="S14T21U303">a960</span>,<span class="var type1" id="S15T21U304">b960</span>,<span class="var type1" id="S42T23U305">y2881</span>,<span class="var type1" id="S32T22U306">zi960</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38">38</a></span><span class="line">    [<span class="var type1" id="S47T23U310">y1920</span>, <span class="var type1" id="S48T22U311">zf1920</span>] = filter(<span class="var type1" id="S16T21U314">a1920</span>,<span class="var type1" id="S17T21U315">b1920</span>,<span class="var type1" id="S45T23U316">y960</span>,<span class="var type1" id="S33T22U317">zi1920</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39">39</a></span><span class="line">    [<span class="var type1" id="S49T23U321">y5760</span>, <span class="var type1" id="S50T22U322">zf5760</span>] = filter(<span class="var type1" id="S18T21U325">a5760</span>,<span class="var type1" id="S19T21U326">b5760</span>,<span class="var type1" id="S47T23U327">y1920</span>,<span class="var type1" id="S34T22U328">zi5760</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40">40</a></span><span class="line">    [<span class="var type1" id="S51T23U332">y3840</span>, <span class="var type1" id="S52T22U333">zf3840</span>] = filter(<span class="var type1" id="S20T21U336">a3840</span>,<span class="var type1" id="S21T21U337">b3840</span>,<span class="var type1" id="S49T23U338">y5760</span>, <span class="var type1" id="S35T22U339">zi3840</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41">41</a></span><span class="line">    [<span class="var type1" id="S53T23U343">y4802</span>, <span class="var type1" id="S54T22U344">zf4802</span>] = filter(<span class="var type1" id="S22T21U347">a4802</span>,<span class="var type1" id="S23T21U348">b4802</span>,<span class="var type1" id="S51T23U349">y3840</span>,<span class="var type1" id="S36T22U350">zi4802</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42">42</a></span><span class="line">    [<span class="var type1" id="S55T23U354">y8643</span>, <span class="var type1" id="S56T22U355">zf8643</span>] = filter(<span class="var type1" id="S24T21U358">a8643</span>,<span class="var type1" id="S25T21U359">b8643</span>,<span class="var type1" id="S53T23U360">y4802</span>,<span class="var type1" id="S37T22U361">zi8643</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43">43</a></span><span class="line">    [<span class="var type1" id="S57T23U365">y2827</span>, <span class="var type1" id="S58T22U366">zf2827</span>] = filter(<span class="var type1" id="S26T21U369">a2827</span>,<span class="var type1" id="S27T21U370">b2827</span>,<span class="var type1" id="S55T23U371">y8643</span>,<span class="var type1" id="S39T22U372">zi2827</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44">44</a></span><span class="line">    <span class="comment">%[y13000, zf13000] = filter(a13000,b13000,y2827,zi13000);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45">45</a></span><span class="line">    <span class="mxinfo " id="T23:U148"><span class="var type1" id="S59T23U375">myLouderSignal</span> = <span class="mxinfo " id="T23:U150"><span class="fcn" id="F180N3:B377">amplify</span>(<span class="var type1" id="S55T23U378">y8643</span>,<span class="mxinfo " id="T10:U152">4</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46">46</a></span><span class="line">    <span class="mxinfo " id="T22:U153"><span class="var type1" id="S30T22U382">zi2881</span> = <span class="var type1" id="S43T22U383">zf2881</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47">47</a></span><span class="line">    <span class="mxinfo " id="T22:U156"><span class="var type1" id="S32T22U386">zi960</span> = <span class="var type1" id="S46T22U387">zf960</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48">48</a></span><span class="line">    <span class="mxinfo " id="T22:U159"><span class="var type1" id="S33T22U390">zi1920</span> = <span class="var type1" id="S48T22U391">zf1920</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49">49</a></span><span class="line">    <span class="mxinfo " id="T22:U162"><span class="var type1" id="S34T22U394">zi5760</span> = <span class="var type1" id="S50T22U395">zf5760</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50">50</a></span><span class="line">    <span class="mxinfo " id="T22:U165"><span class="var type1" id="S35T22U398">zi3840</span>= <span class="var type1" id="S52T22U399">zf3840</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51">51</a></span><span class="line">    <span class="mxinfo " id="T22:U168"><span class="var type1" id="S36T22U402">zi4802</span> = <span class="var type1" id="S54T22U403">zf4802</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52">52</a></span><span class="line">    <span class="mxinfo " id="T22:U171"><span class="var type1" id="S37T22U406">zi8643</span> = <span class="var type1" id="S56T22U407">zf8643</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53">53</a></span><span class="line">    <span class="mxinfo " id="T22:U174"><span class="var type1" id="S39T22U410">zi2827</span> = <span class="var type1" id="S58T22U411">zf2827</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54">54</a></span><span class="line">    <span class="comment">%zi13000 = zf13000;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55">55</a></span><span class="line">    <span class="var type1" id="S8T17U415">filteredWriter</span>.step(<span class="var type1" id="S59T23U417">myLouderSignal</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56">56</a></span><span class="line">    <span class="var type1" id="S4T5U421">deviceWriter</span>.step(<span class="var type1" id="S59T23U423">myLouderSignal</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57">57</a></span><span class="line">    <span class="mxinfo " id="T10:U181"><span class="var type1" id="S29T10U426">i</span>=<span class="mxinfo " id="T10:U183"><span class="var type1" id="S29T10U428">i</span>+<span class="mxinfo " id="T10:U185">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line"><span class="autoExtrinsicFcn" id="F829N4:B432">disp</span>(<span class="string">'End Signal Input'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line">release(<span class="var type1" id="S2T1U437">deviceReader</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line">release(<span class="var type1" id="S4T5U441">deviceWriter</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line">release(<span class="var type1" id="S6T11U445">cleanWriter</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line">release(<span class="var type1" id="S8T17U449">filteredWriter</span>)</span></span>
</pre>
